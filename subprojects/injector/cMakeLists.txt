cmake_minimum_required(VERSION 3.10)

# Define the project name and language
project(MinimalInjector CXX)

# Add the executable target from our source file
add_executable(injector main.cpp)

# Specify Windows-specific settings
if(WIN32)
    # Enable Program Database (/Zi) for Release builds
    add_compile_options("$<$<CONFIG:RELEASE>:/Zi>")
    # Enable linker debug information (/DEBUG) for Release builds
    add_link_options("$<$<CONFIG:RELEASE>:/DEBUG>")

    # Ensure this is built as a console application, not a GUI one
    set_target_properties(injector PROPERTIES WIN32_EXECUTABLE OFF)

    # Link against the necessary Windows library for the API calls
    target_link_libraries(injector PRIVATE kernel32.lib)
endif()